# 🌳 Mock Pay ブランチ戦略 (GitHub Flow Base)

> **最終更新**: 2026-01-30

複雑なルール（Git Flowなど）は避け、**「常に main ブランチが動く状態」**を維持するシンプルな運用にします。

---

## 1. ブランチ構成

### main (メインブランチ)

**役割**: 本番用コード。常にエラーなく動作する状態を保つ。

**ルール**: ここに直接 push してはいけません。必ずPull Request (PR) を経由してマージします。

### 作業用ブランチ

**役割**: 各機能の開発やバグ修正を行う場所。main から派生させます。

**寿命**: マージされたら削除します。

---

## 2. ブランチ名の命名規則 (Naming Convention)

「何をするブランチか」がひと目で分かるように、プレフィックス（接頭辞）を付けます。

| プレフィックス | 意味                       | 例                                       |
| -------------- | -------------------------- | ---------------------------------------- |
| `feature/`     | 新機能の開発               | `feature/login-ui` (ログイン画面作成)    |
| `fix/`         | バグ修正                   | `fix/header-layout` (ヘッダーの崩れ修正) |
| `docs/`        | ドキュメント整備           | `docs/readme-update` (README更新)        |
| `refactor/`    | コード整理（機能変更なし） | `refactor/db-schema` (スキーマ整理)      |

**ポイント**: すべて小文字、単語の区切りはハイフン(`-`)を使います（ケバブケース）。

---

## 3. コミットメッセージのルール

チームが見やすいように、Conventional Commits（標準的なコミット記法）の簡易版を採用します。

### 形式

```
[プレフィックス]: [変更内容]
```

### 例

- `feat: 送金画面のフォームUIを作成`
- `fix: 残高がマイナスになるバグを修正`
- `chore: 必要なライブラリを追加`

---

## 4. 開発のワークフロー (5ステップ)

この手順をチームで守れば、大きな事故は防げます。

### 1️⃣ 最新化

作業前に必ず main を最新にする。

```bash
git checkout main
git pull origin main
```

### 2️⃣ ブランチ作成

作業用ブランチを切る。

```bash
git checkout -b feature/money-transfer
```

### 3️⃣ コミット & プッシュ

こまめにコミットし、リモートへプッシュする。

```bash
git push origin feature/money-transfer
```

### 4️⃣ Pull Request (PR) 作成

GitHub上で main へのマージ依頼を出す。

**重要**: ここでコードレビューを行う（インターン中は「口頭で確認してOKならマージ」でも可）。

### 5️⃣ マージ & 削除

マージボタンを押し、古いブランチは削除する。

---

## 5. よくある質問 (FAQ)

### Q. main に直接コミットしてしまったら？

A. すぐに `git reset` で戻すか、新しいブランチを切ってそこに移動させましょう。

### Q. ブランチをマージし忘れたまま新しいブランチを作ってしまったら？

A. main を最新化してから、新しいブランチに `git rebase main` するか、マージ済みのブランチから切り直しましょう。

### Q. コンフリクト（競合）が起きたら？

A. まずは main を最新化し、作業ブランチで `git merge main` してコンフリクトを解消してからPRを出しましょう。

---

## 6. チーム運用のヒント

✅ **毎日 main を pull する習慣をつける**
→ コンフリクトを最小限に抑えられます。

✅ **PRは小さく、頻繁に**
→ 1つの機能を丸ごと作ってからPRではなく、「UIだけ」「API だけ」など細かく分けると、レビューしやすく、問題も見つけやすくなります。

✅ **コミットメッセージは丁寧に**
→ あとで「なぜこの変更をしたか」が分かるように、意図を書きましょう。

---

## 7. 参考資料

- [GitHub Flow](https://guides.github.com/introduction/flow/)
- [Conventional Commits](https://www.conventionalcommits.org/)
